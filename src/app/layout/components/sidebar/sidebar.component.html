<!-- Sidebar Principal -->
<nav
  [ngClass]="menuService.showSideBar ? 'w-60 xl:w-64' : 'w-[70px]'"
  class="scrollbar-thumb--sm scrollbar-track-rounded bg-white scrollbar-thin scrollbar-track-transparent scrollbar-thumb-gray-200 hidden h-full flex-col justify-between overflow-auto pt-3 transition-all duration-300 lg:flex select-none border-r border-gray-200"
  role="navigation"
  aria-label="Navegación principal"
>
  <div class="flex flex-col px-4 gap-5">
    <!-- Encabezado del Sidebar -->
    <app-sidebar-header
      [showSideBar]="menuService.showSideBar"
      (toggleSidebar)="toggleSidebar()"
    />

    <!-- Menú de Acción -->
    <app-dropdown-menu
      [showSideBar]="menuService.showSideBar"
      [dropdownOpen]="dropdownOpen"
      (toggleDropdown)="toggleDropdown()"
      (abrirModalCrearCarpeta)="abrirModalCrearCarpeta($event)"
      (abrirModalCargaArchivos)="abrirModalCargaArchivos($event)"
      (abrirModalCargaCarpetas)="abrirModalCargaCarpetas($event)"
    />

    <!-- Contenido Principal (Items del sidebar) -->
    <app-sidebar-nav
      [showSideBar]="menuService.showSideBar"
      [dropdownOpen]="dropdownOpen"
      (toggleDropdown)="toggleDropdown()"
    />
  </div>

  <!-- Pie del Sidebar -->
  <div class="m-4 space-x-1">
    <app-sidebar-footer
      *ngIf="!menuService.showSideBar"
      (toggleSidebar)="toggleSidebar()"
    />
  </div>
</nav>

<app-crear-carpeta-modal
  [isOpen]="isOpenCrearCarpetaModal"
  [carpetaPadreId]="carpetaPadreId"
  (close)="cerrarModalCrearCarpeta()"
  (carpetaCreada)="onCarpetaCreada()"
/>

<app-subir-archivo-modal
  [isOpen]="isOpenSubirArchivoModal"
  [carpetaPadreId]="carpetaPadreId"
  (close)="cerrarModalSubirArchivo()"
  (onArchivosSubidos)="onArchivosSubidos()"
  (onSubidaCompletada)="onSubidaCompletada()"
/>

<app-subir-carpeta-modal
  [isOpen]="isOpenSubirCarpetaModal"
  [carpetaPadreId]="carpetaPadreId"
  (close)="cerrarModalSubirCarpeta()"
  (carpetasSubidas)="onCarpetasSubidas()"
/>
